Name = "Sonic"
Description = '''Support DNS provided by sonic.net'''
URL = "https://www.sonic.com/"
Code = "sonic"
Since = "v4.3.1"

Example = '''
SONIC_USERID=12345 \
SONIC_APIKEY=4d6fbf2f9ab0fa11697470918d37625851fc0c51 \
lego --email myemail@example.com --dns sonic --domains my.example.org run

'''

Additional = '''
## Description

You must use `SONIC_USERID` and `SONIC_APIKEY` to authenticate.

### API keys

The API keys (`SONIC_USERID` and `SONIC_APIKEY`), are generated based on an authenticated request to dyndns/api_key.

See https://public-api.sonic.net/dyndns/#requesting_an_api_key for additional details.

This UserID and APIKey combo allow modifications to any DNS entries connected to the managed domain (hostname).

Hostname should be the toplevel domain managed e.g example.com not www.example.com

example:
curl -X POST -H "Content-Type: application/json" --data '{"username":"notarealuser","password":"notarealpassword","hostname":"example.com"}' https://public-api.sonic.net/dyndns/api_key

{"userid":"12345","apikey":"4d6fbf2f9ab0fa11697470918d37625851fc0c51","result":200,"message":"OK"}
'''

[Configuration]
  [Configuration.Credentials]
    SONIC_USERID = "API USERID"
    SONIC_APIKEY = "API Key"
  [Configuration.Additional]
    SONIC_POLLING_INTERVAL = "Time between DNS propagation check"
    SONIC_PROPAGATION_TIMEOUT = "Maximum waiting time for DNS propagation"
    SONIC_TTL = "The TTL of the TXT record used for the DNS challenge"
    SONIC_HTTP_TIMEOUT = "API request timeout"

[Links]
  API = "https://public-api.sonic.net/dyndns/"

